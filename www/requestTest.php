<?php
/**
 * Curl test file 
 * 
 * @author Pierre HUBERT 2017
 */
include("inc/func.php");

$requestProtocol = "http";
$page = "TSS/controller?action=2";
$host = "192.168.1.190";

$postData = base64_decode("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHBsaXN0IFBVQkxJQyAiLS8vQXBwbGUvL0RURCBQTElTVCAxLjAvL0VOIiAiaHR0
cDovL3d3dy5hcHBsZS5jb20vRFREcy9Qcm9wZXJ0eUxpc3QtMS4wLmR0ZCI+CjxwbGlzdCB2ZXJzaW9uPSIxLjAiPgo8ZGljdD4KCTxrZXk+QEFQVGlja2V0PC9rZXk+
Cgk8dHJ1ZS8+Cgk8a2V5PkBCQlRpY2tldDwva2V5PgoJPHRydWUvPgoJPGtleT5ASG9zdFBsYXRmb3JtSW5mbzwva2V5PgoJPHN0cmluZz53aW5kb3dzPC9zdHJpbmc+
Cgk8a2V5PkBMb2NhbGl0eTwva2V5PgoJPHN0cmluZz5mcl9GUjwvc3RyaW5nPgoJPGtleT5AVVVJRDwva2V5PgoJPHN0cmluZz4xQ0QzMTE0Ri1GNTc5LUVBNDgtQjM3
NC0xOTY2Q0E0Mjg1NUE8L3N0cmluZz4KCTxrZXk+QFZlcnNpb25JbmZvPC9rZXk+Cgk8c3RyaW5nPmxpYmF1dGhpbnN0YWxsX1dpbi00MTEuNDAuMzwvc3RyaW5nPgoJ
PGtleT5BcEJvYXJkSUQ8L2tleT4KCTxpbnRlZ2VyPjA8L2ludGVnZXI+Cgk8a2V5PkFwQ2hpcElEPC9rZXk+Cgk8aW50ZWdlcj4zNTEwNDwvaW50ZWdlcj4KCTxrZXk+
QXBFQ0lEPC9rZXk+Cgk8aW50ZWdlcj4xMTE3Mzk2Njk2MzY0PC9pbnRlZ2VyPgoJPGtleT5BcE5vbmNlPC9rZXk+Cgk8ZGF0YT4KCTRNeVZTd0Jjd0VXKzJlREw2NitK
eHBaWTh1cz0KCTwvZGF0YT4KCTxrZXk+QXBQcm9kdWN0aW9uTW9kZTwva2V5PgoJPHRydWUvPgoJPGtleT5BcFNlY3VyaXR5RG9tYWluPC9rZXk+Cgk8aW50ZWdlcj4x
PC9pbnRlZ2VyPgoJPGtleT5BcHBsZUxvZ288L2tleT4KCTxkaWN0PgoJCTxrZXk+RGlnZXN0PC9rZXk+CgkJPGRhdGE+CgkJYWkwbjJNa0FOVXhTb2ZKbHBwVmtYbm1l
cThvPQoJCTwvZGF0YT4KCQk8a2V5PlRydXN0ZWQ8L2tleT4KCQk8dHJ1ZS8+Cgk8L2RpY3Q+Cgk8a2V5PkJhdHRlcnlDaGFyZ2luZzwva2V5PgoJPGRpY3Q+CgkJPGtl
eT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQl2QTU3Q3A3T2VFaUR2VEJaSzhQQ0N4YjN0NFk9CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4K
CTwvZGljdD4KCTxrZXk+QmF0dGVyeUNoYXJnaW5nMDwva2V5PgoJPGRpY3Q+CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQlGZU9UMEZ2eng2SGNUOSsxek5a
TWIxMlRhdnM9CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KCTxrZXk+QmF0dGVyeUNoYXJnaW5nMTwva2V5PgoJPGRpY3Q+
CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQllT0xIdU4yd2JiTm9BNGYycytGUGhmbnFJWkU9CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0
cnVlLz4KCTwvZGljdD4KCTxrZXk+QmF0dGVyeUZ1bGw8L2tleT4KCTxkaWN0PgoJCTxrZXk+RGlnZXN0PC9rZXk+CgkJPGRhdGE+CgkJZ0U4WjY3SjZTT2FCeGhSSWFh
SkVhYWYzWUI0PQoJCTwvZGF0YT4KCQk8a2V5PlRydXN0ZWQ8L2tleT4KCQk8dHJ1ZS8+Cgk8L2RpY3Q+Cgk8a2V5PkJhdHRlcnlMb3cwPC9rZXk+Cgk8ZGljdD4KCQk8
a2V5PkRpZ2VzdDwva2V5PgoJCTxkYXRhPgoJCUdVQlY0KzVNN1RJR0xNVGl6VmpEUXNhNFIwUT0KCQk8L2RhdGE+CgkJPGtleT5UcnVzdGVkPC9rZXk+CgkJPHRydWUv
PgoJPC9kaWN0PgoJPGtleT5CYXR0ZXJ5TG93MTwva2V5PgoJPGRpY3Q+CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQkra29iS3lEZWM0cndlbWxjOXdTVHk2
cklsTmM9CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KCTxrZXk+QmF0dGVyeVBsdWdpbjwva2V5PgoJPGRpY3Q+CgkJPGtl
eT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQlaLzJIcVBzSGJUeldGbHBMR3AvWXdPb3NJM1E9CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4K
CTwvZGljdD4KCTxrZXk+RGV2aWNlVHJlZTwva2V5PgoJPGRpY3Q+CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQkycm9qYTJEeHF5cGNVaUxkaXNxcGI1bkps
Y3c9CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KCTxrZXk+S2VybmVsQ2FjaGU8L2tleT4KCTxkaWN0PgoJCTxrZXk+RGln
ZXN0PC9rZXk+CgkJPGRhdGE+CgkJVTREc0pVekdIQU1Lb2Fxcng2TzBicGlZdTM0PQoJCTwvZGF0YT4KCQk8a2V5PlBhcnRpYWxEaWdlc3Q8L2tleT4KCQk8ZGF0YT4K
CQlRQUFBQUxqL1pBQWNyVGR5ampINUVqdjdKcCt6S3NVUXE3Z2dBQT09CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KCTxr
ZXk+TExCPC9rZXk+Cgk8ZGljdD4KCQk8a2V5PkJ1aWxkU3RyaW5nPC9rZXk+CgkJPHN0cmluZz5pQm9vdC0xNTM3LjkuNTV+MTE8L3N0cmluZz4KCQk8a2V5PkRpZ2Vz
dDwva2V5PgoJCTxkYXRhPgoJCXgrQUhyYXRPU3VXb2VOaWd4cGZFUnh0Z0lVaz0KCQk8L2RhdGE+CgkJPGtleT5QYXJ0aWFsRGlnZXN0PC9rZXk+CgkJPGRhdGE+CgkJ
UUFBQUFIaEJBUUE2SExtMmptOExxNFVsUE94dXM3Q0JGSm1xamc9PQoJCTwvZGF0YT4KCQk8a2V5PlRydXN0ZWQ8L2tleT4KCQk8dHJ1ZS8+Cgk8L2RpY3Q+Cgk8a2V5
PlJlY292ZXJ5TW9kZTwva2V5PgoJPGRpY3Q+CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQlkS1VFYjBya3g5WkRqUlR1UTIwRHU2MGl1b1E9CgkJPC9kYXRh
PgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KCTxrZXk+UmVzdG9yZURldmljZVRyZWU8L2tleT4KCTxkaWN0PgoJCTxrZXk+RGlnZXN0PC9r
ZXk+CgkJPGRhdGE+CgkJMnJvamEyRHhxeXBjVWlMZGlzcXBiNW5KbGN3PQoJCTwvZGF0YT4KCQk8a2V5PlRydXN0ZWQ8L2tleT4KCQk8dHJ1ZS8+Cgk8L2RpY3Q+Cgk8
a2V5PlJlc3RvcmVLZXJuZWxDYWNoZTwva2V5PgoJPGRpY3Q+CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQlVNERzSlV6R0hBTUtvYXFyeDZPMGJwaVl1MzQ9
CgkJPC9kYXRhPgoJCTxrZXk+UGFydGlhbERpZ2VzdDwva2V5PgoJCTxkYXRhPgoJCVFBQUFBTGovWkFBY3JUZHlqakg1RWp2N0pwK3pLc1VRcTdnZ0FBPT0KCQk8L2Rh
dGE+CgkJPGtleT5UcnVzdGVkPC9rZXk+CgkJPHRydWUvPgoJPC9kaWN0PgoJPGtleT5SZXN0b3JlTG9nbzwva2V5PgoJPGRpY3Q+CgkJPGtleT5EaWdlc3Q8L2tleT4K
CQk8ZGF0YT4KCQlhaTBuMk1rQU5VeFNvZkpscHBWa1hubWVxOG89CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KCTxrZXk+
UmVzdG9yZVJhbURpc2s8L2tleT4KCTxkaWN0PgoJCTxrZXk+RGlnZXN0PC9rZXk+CgkJPGRhdGE+CgkJQkFCSDlBYXRHVzhrWFRyRUYyWDBmZ3FJdzdvPQoJCTwvZGF0
YT4KCQk8a2V5PlBhcnRpYWxEaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQlRQUFBQVBoZ3pRQWlpVkN3clZzQ0tXeVEzMmFnU21XamNYeGZPdz09CgkJPC9kYXRhPgoJCTxr
ZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KCTxrZXk+VW5pcXVlQnVpbGRJRDwva2V5PgoJPGRhdGE+CglKSE95WGNrK3h4MFpoa1FEVkxTczlkendR
Mjg9Cgk8L2RhdGE+Cgk8a2V5PmlCRUM8L2tleT4KCTxkaWN0PgoJCTxrZXk+QnVpbGRTdHJpbmc8L2tleT4KCQk8c3RyaW5nPmlCb290LTE1MzcuOS41NX4xMTwvc3Ry
aW5nPgoJCTxrZXk+RGlnZXN0PC9rZXk+CgkJPGRhdGE+CgkJRVNBSEUwMkk1MmJ0Qy9OZkpHTjZwWnB1aU5nPQoJCTwvZGF0YT4KCQk8a2V5PlBhcnRpYWxEaWdlc3Q8
L2tleT4KCQk8ZGF0YT4KCQlRQUFBQUhqQkFnQ1VUM0ZJcXMvUkJNVmkwTnJsRndrU0VEQXR4QT09CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVl
Lz4KCTwvZGljdD4KCTxrZXk+aUJTUzwva2V5PgoJPGRpY3Q+CgkJPGtleT5CdWlsZFN0cmluZzwva2V5PgoJCTxzdHJpbmc+aUJvb3QtMTUzNy45LjU1fjExPC9zdHJp
bmc+CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQkyYWwvZUhUbW0vcUI0ckUvOStxcWQ5V1ZnbDA9CgkJPC9kYXRhPgoJCTxrZXk+UGFydGlhbERpZ2VzdDwv
a2V5PgoJCTxkYXRhPgoJCVFBQUFBSGp4QUFBUmEwMTg4TW8zRGV4OVE3TFZlZmdVVFNqaDRRPT0KCQk8L2RhdGE+CgkJPGtleT5UcnVzdGVkPC9rZXk+CgkJPHRydWUv
PgoJPC9kaWN0PgoJPGtleT5pQm9vdDwva2V5PgoJPGRpY3Q+CgkJPGtleT5EaWdlc3Q8L2tleT4KCQk8ZGF0YT4KCQkwMnhQSisrdXlpVU9qTHhRMzljMVk0dFZ1TTg9
CgkJPC9kYXRhPgoJCTxrZXk+VHJ1c3RlZDwva2V5PgoJCTx0cnVlLz4KCTwvZGljdD4KPC9kaWN0Pgo8L3BsaXN0Pg==");

$headers = array(
	//'POST '.$page.' HTTP/1.0',
	'Accept: */*',
	'Host: gs.apple.com',
	'Connection: Keep-Alive',
	'Content-Type: text/xml; charset="utf-8"',
	'User-Agent: InetURL/1.0',
	'Content-Length: '.strlen($postData),
	'Cache-Control: no-cache',
);

print_r(postCurlRequest($requestProtocol, $page, $host, $headers, $postData));